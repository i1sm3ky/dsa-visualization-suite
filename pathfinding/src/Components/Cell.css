.cell-parent {
  position: relative;
  aspect-ratio: 1 / 1;
  transition: transform 1s;
}

.grid-mode .cell-parent {
  transform: translateX(-50%) translateY(-50%);
}

.cell {
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  transition: height 0.4s, width 0.4s, border-radius 0.2s, transform 0.3s;
  will-change: height, width, border-radius, transform;

  color: black;
}

.cell:hover {
  cursor: pointer;
}

.grid-mode .cell {
  height: 200%;
  width: 200%;
}

.graph-mode .cell {
  height: 100%;
  width: 100%;
  border-radius: 100em;
}

.cell::before,
.cell::after {
  content: "";
  position: absolute;
  height: 100%;
  width: 100%;
  right: 1px;
  bottom: 1px;
  border: 1px solid transparent;
  transition: background 0.3s, border 0.2s;
  will-change: background, border;

  z-index: -1;
}

.graph-mode .cell::before,
.graph-mode .cell::after {
  height: calc(100% - 2px);
  width: calc(100% - 2px);
  right: initial;
  bottom: initial;
  border-radius: 100em !important;
}

.cell-empty::before {
  animation: remove-state 0.3s forwards ease-in-out;
}

.cell-wall::before {
  background-color: #747474;
  border-color: #aaaaaa !important;
  box-shadow: inset 1px 1px 10px 2px #aca7a7;
  backdrop-filter: blur(100px);
  animation: add-state 0.3s forwards ease-in-out;
}

.cell-start::before {
  background-color: #c9a0dc;
  border-radius: 2px;
  animation: add-state 0.3s forwards ease-in-out;
}

.cell-end::before {
  background-color: #009c4a;
  border-radius: 2px;
  animation: add-state 0.3s forwards ease-in-out;
}

.cell-water::before {
  background-color: #688fe5;
  border-color: #688fe5 !important;
  box-shadow: inset 1px 1px 10px 2px #2352b8;
  backdrop-filter: blur(100px);
  animation: add-state 0.3s forwards ease-in-out;
}

.cell-mud::before {
  background-color: #7e6553;
  border-color: #7e6553 !important;
  box-shadow: inset 1px 1px 10px 2px #4d3b2f;
  backdrop-filter: blur(100px);
  animation: add-state 0.3s forwards ease-in-out;
}

.cell-sand::before {
  background-color: #9f9062;
  box-shadow: inset 1px 1px 10px 2px #6a5f3fa5;
  backdrop-filter: blur(100px);
  animation: add-state 0.3s forwards ease-in-out;
  background-image: url('data:image/svg+xml,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.85" numOctaves="3" stitchTiles="stitch" /></filter><rect width="100%" height="100%" filter="url(%23noiseFilter)" /></svg>');
  background-size: 100px;
  mix-blend-mode: overlay;
}

.cell-start:hover,
.cell-end:hover {
  cursor: grab;
}

.cell-start:active,
.cell-end:active {
  cursor: grabbing;
}

.cell-visiting::after {
  animation: visiting 0.7s forwards ease-in-out;
}

.cell-visited::after {
  box-shadow: inset 0 0 10px 3px yellow;
}

.cell-path::after {
  box-shadow: inset 0 0 10px 3px pink !important;
}

@keyframes add-state {
  from {
    transform: scale(0);
  }
  50% {
    transform: scale(1.25);
  }
  to {
    transform: scale(1.1);
  }
}

@keyframes remove-state {
  from {
    transform: scale(1.1);
  }
  50% {
    transform: scale(1.25);
  }
  to {
    transform: scale(0);
  }
}

@keyframes visiting {
  0% {
    box-shadow: inset 0 0 10px 3px red;
    border-radius: 100%;
    transform: scale(1);
  }
  50% {
    box-shadow: inset 0 0 10px 3px orangered;
  }
  75% {
    box-shadow: inset 0 0 10px 3px orange;
    transform: scale(1.25);
  }
  100% {
    box-shadow: inset 0 0 10px 3px yellow;
    border-radius: initial;
    transform: scale(1.1);
  }
}
