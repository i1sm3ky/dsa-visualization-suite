.toolbar {
  padding: 1em;
  display: flex;
  flex-wrap: wrap;
  gap: 0.5em;
}

.toolbar-btn {
  height: 2.5em;
  padding: 0 1em;
  background: none;
  border: 2px solid #6090bf;
  border-radius: 10px;
  font-size: 1em;
  color: #6090bf;
  transition: color 0.2s, border-color 0.2s;
  will-change: color, border-color;
}

.toolbar-btn:hover,
.realtime-checkbox:hover {
  border-color: #3a6189;
  color: #4977a5;
  cursor: pointer;
}

.toolbar-btn:active,
.realtime-checkbox:active {
  border-color: #294c6e;
  color: #315981;
}

.toolbar-btn:disabled,
.realtime-checkbox:disabled {
  border-color: #485869;
  color: #485869;
}

.tool-label-span {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 0.25em;
}

.mode-change-btn {
  width: 4em;
  padding: 0;
}

.animate-mode-change-btn {
  opacity: 0;
  animation: animate-mode-change-btn 0.5s forwards;
}

@keyframes animate-mode-change-btn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.grid-dim-input {
  height: 2.5em;
  width: 5.4em;
  border: 2px solid #6090bf;
  border-radius: 10px;
  color: #6090bf;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  transition: color 0.3s, border-color 0.3s;
  will-change: color, border-color;
}

.grid-dim-input-disabled {
  border-color: #485869;
  color: #485869;
  pointer-events: none;
}

.grid-dim-change-btn {
  height: 100%;
  width: 100%;
  background: none;
  border: none;
  font-size: 1em;
  color: inherit;
  transition: background-color 0.2s;
  will-change: background-color;
}

.grid-dim-change-btn:hover {
  background-color: #294c6e;
  cursor: pointer;
}

.grid-dim-change-btn:active {
  background-color: #1c3b59;
}

.grid-dim-text-input {
  height: 100%;
  width: 2.5em;
  background: none;
  border: none;
  font-size: 1em;
  text-align: center;
  color: inherit;
  transition: background-color 0.3s;
  will-change: background-color;
}

.grid-dim-text-input:focus {
  outline: none;
  background-color: #294c6e;
}

.speed-label {
  width: 6.25em;
}

.speed-range {
  --color: #ffb449;
  --gap: 4px;
  --thickness: 3px;
  --thumb-size: 15px;
  width: 100px;
  height: var(--thumb-size);
  --_color: color-mix(in srgb, var(--color), #000 var(--p, 0%));
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background: none;
  cursor: pointer;
  overflow: hidden;
}

.speed-range:focus-visible,
.speed-range:hover {
  --p: 25%;
}

.speed-range:active,
.speed-range:focus-visible {
  --_b: var(--thumb-size);
}

.speed-range[type="range" i]::-webkit-slider-thumb {
  height: var(--thumb-size);
  aspect-ratio: 1;
  border-radius: 50%;
  box-shadow: 0 0 0 var(--_b, var(--thickness)) inset var(--_color);
  border-image: linear-gradient(90deg, var(--_color) 50%, #ababab 0) 0 1 / calc(50% - var(--thickness) / 2) 100vw/0 calc(100vw + var(--gap));
  -webkit-appearance: none;
  appearance: none;
  transition: 0.3s;
  background: none;
}

.speed-range[type="range"]::-moz-range-thumb {
  height: var(--thumb-size);
  width: var(--thumb-size);
  background: none;
  border-radius: 50%;
  box-shadow: 0 0 0 var(--_b, var(--thickness)) inset var(--_color);
  border-image: linear-gradient(90deg, var(--_color) 50%, #ababab 0) 0 1 / calc(50% - var(--thickness) / 2) 100vw/0 calc(100vw + var(--gap));
  -moz-appearance: none;
  appearance: none;
  transition: 0.3s;
}

@supports not (color: color-mix(in srgb, red, red)) {
  .speed-range {
    --_color: var(--color);
  }
}

.speed-range:disabled {
  --color: #73562e;
}

.realtime-checkbox {
  display: flex;
  height: 2.5em;
  padding: 0 1em;
  background: none;
  border: 2px solid #6090bf;
  border-radius: 10px;
  font-size: 1em;
  color: #6090bf;
  transition: color 0.2s, border-color 0.2s;
  will-change: color, border-color;
}

.realtime-checkbox-disabled {
  border-color: #485869;
  color: #485869;
  pointer-events: none;
}

input[type="checkbox"] {
  height: 0;
  width: 0;
  z-index: -1;
}

input[type="checkbox"] + label {
  position: relative;
  display: flex;
  margin: 0.6em 0;
  align-items: center;
  color: inherit;
  z-index: -1;
  transition: color 250ms cubic-bezier(0.4, 0, 0.23, 1);
}

input[type="checkbox"] + label > span {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-right: 1em;
  width: 1em;
  height: 1em;
  background: transparent;
  border: 2px solid currentColor;
  border-radius: 2px;
  cursor: pointer;
  transition: all 250ms cubic-bezier(0.4, 0, 0.23, 1);
}

input[type="checkbox"]:checked + label > span {
  border: 0.5em solid #ffb449;
  animation: shrink-bounce 200ms cubic-bezier(0.4, 0, 0.23, 1);
}

input[type="checkbox"]:checked + label > span:before {
  content: "";
  position: absolute;
  height: 100%;
  width: 100%;
  top: 0.65em;
  left: 0.325em;
  border-right: 3px solid transparent;
  border-bottom: 3px solid transparent;
  transform: rotate(45deg);
  animation: checkbox-check 125ms 250ms cubic-bezier(0.4, 0, 0.23, 1) forwards;
}

@keyframes shrink-bounce {
  0% {
    transform: scale(1);
  }
  33% {
    transform: scale(0.85);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes checkbox-check {
  0% {
    width: 0;
    height: 0;
    border-color: #212121;
    transform: translate3d(0, 0, 0) rotate(45deg);
  }
  33% {
    width: 0.2em;
    height: 0;
    transform: translate3d(0, 0, 0) rotate(45deg);
  }
  100% {
    width: 0.2em;
    height: 0.5em;
    border-color: #212121;
    transform: translate3d(0, -0.5em, 0) rotate(45deg);
  }
}

.tool-btn-bg {
  --tool-btn-bg-offset: 3;
  position: absolute;
  height: 2.5em;
  width: 3.5em;
  border-radius: 8px;
  font-size: 0.8em;
  transform: translateX(calc(var(--tool-btn-bg-offset) * 3.5em));
  z-index: -1;
  transition: transform 0.3s, background 0.3s, border 0.3s;
  will-change: transform, background, border;
}

.tool-btn {
  height: 2.5em;
  width: 3.5em;
  background: none;
  border: none;
  font-size: 0.8em;
  color: aliceblue;
  transition: color 0.2s;
  will-change: color;
}

.tool-btn:hover {
  color: #a0a7ad;
  cursor: pointer;
}

.tool-btn:active {
  color: #73797e;
}

.tool-btn:disabled {
  color: #8d959b;
}

.tool-empty {
  background-color: #f5a19d;
  border-color: #f5a19d;
  box-shadow: inset 1px 1px 10px 2px #9b5450;
}

.tool-wall {
  background-color: #747474;
  border-color: #aaaaaa;
  box-shadow: inset 1px 1px 10px 2px #aca7a7;
}

.tool-start {
  background-color: #c9a0dc;
}

.tool-end {
  background-color: #009c4a;
}

.tool-water {
  background-color: #688fe5;
  border-color: #688fe5;
  box-shadow: inset 1px 1px 10px 2px #163e94;
}

.tool-mud {
  background-color: #7e6553;
  border-color: #7e6553;
  box-shadow: inset 1px 1px 10px 2px #4d3b2f;
}

.tool-sand {
  background-color: #bbab7e;
  box-shadow: inset 1px 1px 10px 2px #6a5f3f;
}

.tool-sand::after {
  content: "";
  height: 100%;
  width: 100%;
  background-image: url('data:image/svg+xml,<svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><filter id="noiseFilter"><feTurbulence type="fractalNoise" baseFrequency="0.85" numOctaves="3" stitchTiles="stitch" /></filter><rect width="100%" height="100%" filter="url(%23noiseFilter)" /></svg>');
  background-size: 100px;
  mix-blend-mode: overlay;
}
